# 專案基本資料
project:
  name: "Cloudflare WordPress Accelerator"
  type: "Fullstack"
  language: "TypeScript + PHP"
  framework: "SvelteKit + WordPress"
  database: "Cloudflare D1 + MySQL"

# AI 模型設定
ai:
  primary_model: "claude-sonnet-4"      # 日常開發用
  architect_model: "claude-opus-4"      # 架構設計用
  language: "cantonese"                 # 廣東話

  rules_files:
    - ".ai/CLAUDE.md"                   # Sonnet 規則
    - ".ai/CLAUDE_OPUS.md"              # Opus 規則

# 文檔優先順序（AI 會按呢個次序讀）
priority_docs:
  - ".ai/CLAUDE.md"                     # 最高優先（AI 規則）
  - ".ai/context.yaml"                  # AI 設定
  - ".ai/ATTEMPTED_SOLUTIONS.md"        # 已嘗試方案（避免重複）
  - "PROGRESS.md"                       # 進度追蹤
  - "task.md"                           # 任務清單
  - "README.md"
  - "docs/ARCHITECTURE.md"
  - "docs/API_SPEC.md"
  - "implementation_plan.md"
  - "architecture_design.md"

# 當前狀態追蹤（AI 自動識別用）
current_status:
  last_confirmed: "2026-01-19"
  confirmed_by: "user"
  current_focus:
    phase: "5.0"
    task: "VPS 遷移與 AI 自動化整合"
    next_step: "Phase A - VPS 遷移準備（DNS + Docker 遷移）"
    user_note: "完整 5-phase 計劃詳見 .ai/IDEAS.md#Phase-5-8-Overview"

  on_hold_tasks:
    - phase: "4.7"
      task: "安全與效能優化（Cache Warming + 移除明文密碼）"
      reason: "Phase 5.0 VPS 遷移優先，Phase 4.7 將在新 VPS 環境完成"

# 代碼風格
code_style:
  indent: "2 spaces"                    # SvelteKit 用 2 spaces
  naming: "camelCase"                   # TypeScript 用 camelCase
  max_line_length: 100
  comment_language: "cantonese"         # 註解用廣東話

# 文件更新邏輯系統（數據層）
documentation_update:
  # 文件分類清單
  file_classification:
    core_tracking:
      - "PROGRESS.md"                   # 進度追蹤
      - "task.md"                       # 完整任務清單
      - "CHANGLOG.md"                   # 改動記錄（強制更新）

    technical_docs:
      - "architecture_design.md"        # 完整架構設計
      - "implementation_plan.md"        # 實施計劃

    api_architecture:
      - "docs/ARCHITECTURE.md"          # 架構概覽
      - "docs/API_SPEC.md"              # API 規範

    ai_config:
      - ".ai/IDEAS.md"                  # 完整實施方案
      - ".ai/ATTEMPTED_SOLUTIONS.md"    # 失敗方案記錄
      - ".ai/CLAUDE.md"                 # AI 行為規則
      - ".ai/CLAUDE_OPUS.md"            # Opus 架構規則
      - ".ai/context.yaml"              # 專案配置（本文件）

    backup_debug:
      - "README.md"                     # 專案說明
      - "debug_*.md"                    # 除錯記錄

  # 操作類型列表（用戶必須指定）
  operation_types:
    - "新功能"        # 全新功能開發
    - "新構思"        # 新的技術方案或架構設計
    - "修復"          # Bug 修復
    - "加建"          # 在現有功能上添加內容
    - "刪除"          # 移除過時內容
    - "取代"          # 替換舊實作
    - "優化"          # 性能或代碼質量改進
    - "重構"          # 架構或代碼結構調整

  # 屬性映射表（操作類型 → 影響文件）
  attribute_mapping:
    新功能:
      mandatory:
        - "CHANGLOG.md"                 # 永遠強制
        - "PROGRESS.md"                 # 進度追蹤
        - "task.md"                     # 任務清單
      check_if_major:
        - "architecture_design.md"      # 重大變更檢查
        - "implementation_plan.md"      # 重大變更檢查
        - "docs/ARCHITECTURE.md"        # 重大變更檢查
        - ".ai/IDEAS.md"                # 新構思記錄
      check_if_api:
        - "docs/API_SPEC.md"            # 如涉及 API

    新構思:
      mandatory:
        - "CHANGLOG.md"
        - ".ai/IDEAS.md"                # 構思記錄
        - "PROGRESS.md"
      check_if_major:
        - "architecture_design.md"
        - "implementation_plan.md"
        - "docs/ARCHITECTURE.md"

    修復:
      mandatory:
        - "CHANGLOG.md"
        - "PROGRESS.md"
        - ".ai/ATTEMPTED_SOLUTIONS.md"  # 記錄失敗方案
      optional:
        - "task.md"                     # 如修復涉及任務變更

    加建:
      mandatory:
        - "CHANGLOG.md"
        - "PROGRESS.md"
      check_context:
        - "task.md"                     # 根據加建內容判斷
        - ".ai/IDEAS.md"                # 如加建新構思

    刪除:
      mandatory:
        - "CHANGLOG.md"
        - "PROGRESS.md"
      check_if_major:
        - "architecture_design.md"      # 如刪除重要功能
        - "docs/ARCHITECTURE.md"

    取代:
      mandatory:
        - "CHANGLOG.md"
        - "PROGRESS.md"
        - ".ai/ATTEMPTED_SOLUTIONS.md"  # 記錄舊方案為何失敗
      check_if_major:
        - "architecture_design.md"      # 重大替換
        - "implementation_plan.md"
        - "docs/ARCHITECTURE.md"

    優化:
      mandatory:
        - "CHANGLOG.md"
        - "PROGRESS.md"
      check_if_major:
        - "architecture_design.md"      # 如架構級優化

    重構:
      mandatory:
        - "CHANGLOG.md"
        - "PROGRESS.md"
      check_if_major:
        - "architecture_design.md"      # 重構通常影響架構
        - "implementation_plan.md"
        - "docs/ARCHITECTURE.md"